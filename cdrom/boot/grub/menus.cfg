set_theme

if [ ! "${seen_menu}" = "yes" ]; then
    set timeout=5
    set seen_menu="yes"
    export seen_menu
fi

submenu 'Live CD' {
    multiboot /kernel.gz vid=${t_driver} start=live-session ${t_root} migrate
    load_ramdisk
    set_vidmode
    boot
}
submenu 'VGA text-mode console' {
    multiboot /kernel.gz start=--vga ${t_root} migrate
    load_ramdisk
    set gfxpayload=text
    boot
}
submenu '> Advanced graphics configuration options...' {
    set_theme
    menuentry '800x600' {
        set g_mode=800x600x32
        export g_mode
        configfile /boot/grub/menus.cfg
    }
    menuentry '1024x768' {
        set g_mode=1024x768x32
        export g_mode
        configfile /boot/grub/menus.cfg
    }
    menuentry '1280x720' {
        set g_mode=1280x720x32
        export g_mode
        configfile /boot/grub/menus.cfg
    }
    menuentry '1440x900' {
        set g_mode=1440x900x32
        export g_mode
        configfile /boot/grub/menus.cfg
    }
    menuentry '1920x1080' {
        set g_mode=1920x1080x32
        export g_mode
        configfile /boot/grub/menus.cfg
    }
    menuentry 'Custom...' {
        read g_mode
        set g_mode=${g_mode}x32
        export gfxmode
        configfile /boot/grub/menus.cfg
    }
    menuentry 'Automatically detect video adapter (Default)' {
        set t_driver=auto
        export t_driver
        configfile /boot/grub/menus.cfg
    }
    menuentry 'Use QEMU/Bochs/VirtualBox Driver' {
        set t_driver=qemu
        export t_driver
        configfile /boot/grub/menus.cfg
    }
    menuentry 'Use VMWare driver' {
        set t_driver=vmware
        export t_driver
        configfile /boot/grub/menus.cfg
    }
    menuentry 'Use Preset LFB Driver' {
        set t_driver=preset
        export t_driver
        configfile /boot/grub/menus.cfg
    }
}

